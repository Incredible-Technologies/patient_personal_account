<div class="container">
  <div class="greeting">Добрый день, {{user.firstName}} {{user.lastName}}</div>


  <!-- <mat-form-field>
    <mat-label>Choose a date</mat-label>
    <input matInput [matDatepicker]="picker">
    <mat-hint>MM/DD/YYYY</mat-hint>
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field> -->
  <div class="dateToVisitContainer">
    <div>Выберите удобную дату посещения</div>
    <mat-form-field class="example-form-field">
      <mat-label>Выбрать дату</mat-label>
      <input matInput [matDatepicker]="datepicker" [min]="minDate" (dateChange)="updateDate($event)">
      <mat-hint>ДД/ММ/ГГГГ</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="datepicker"></mat-datepicker-toggle>
      <mat-datepicker #datepicker>
        <mat-datepicker-actions>
          <button mat-button class="datepickerButton" matDatepickerCancel>Отменить</button>
          <button mat-button class="datepickerButton" color="primary" matDatepickerApply>Выбрать</button>
        </mat-datepicker-actions>
      </mat-datepicker>
    </mat-form-field>
  </div>



  <div class="selectors">
    <div class="speciality">
      <div>Выберите нужного специалиста</div>
      <select #cricket (change)="updateSpeciality($event)">
        <option value="empty">Не выбран</option>
        <option *ngFor="let speciality of specialities" [value]="speciality">
          {{speciality}}
        </option>
      </select>
    </div>
    <div class="doctor">
      <div>Выберите врача</div>
      <select (change)="updateDoctor($event)">
        <option value="empty">Не выбран</option>
        <option *ngFor="let doctor of doctors" [value]="doctor">
          {{doctor}}
        </option>
      </select>
    </div>
  </div>



  <div *ngIf="form.doctor !== 'empty'" class="doctorAvailabilityContainer">
    <div class="selectedDoctor">Расписание приема {{form.doctor}}</div>

    <div class="ticketsLeft">Осталось свободных слотов: {{form.ticketsLeft}} </div>

    <table mat-table [dataSource]="form.dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="mnd">
        <th mat-header-cell *matHeaderCellDef="let element"
          (click)="element.mnd === 'Выходной' ? null : onClick('mnd')">
          Пн.
        </th>
        <td mat-cell *matCellDef="let element" (click)="element.mnd === 'Выходной' ? null : onClick('mnd')"
          [class.day-selected]="form.timetable.isSelectedDay==='mnd'">
          {{element.mnd}} </td>
      </ng-container>

      <ng-container matColumnDef="tsd">
        <th mat-header-cell *matHeaderCellDef="let element"
          (click)="element.tsd === 'Выходной' ? null : onClick('tsd')">
          Вт. </th>
        <td mat-cell *matCellDef="let element" [class.day-selected]="form.timetable.isSelectedDay==='tsd'"
          (click)="element.tsd === 'Выходной' ? null : onClick('tsd')"> {{element.tsd}}
        </td>
      </ng-container>

      <ng-container matColumnDef="wnd">
        <th mat-header-cell *matHeaderCellDef="let element"
          (click)="element.wnd === 'Выходной' ? null : onClick('wnd')">
          Ср. </th>
        <td mat-cell *matCellDef="let element" [class.day-selected]="form.timetable.isSelectedDay==='wnd'"
          (click)="element.wnd === 'Выходной' ? null : onClick('wnd')"> {{element.wnd}}
        </td>
      </ng-container>

      <ng-container matColumnDef="trd">
        <th mat-header-cell *matHeaderCellDef="let element"
          (click)="element.trd === 'Выходной' ? null : onClick('trd')">
          Чт. </th>
        <td mat-cell *matCellDef="let element" [class.day-selected]="form.timetable.isSelectedDay==='trd'"
          (click)="element.trd === 'Выходной' ? null : onClick('trd')"> {{element.trd}}
        </td>
      </ng-container>

      <ng-container matColumnDef="frd">
        <th mat-header-cell *matHeaderCellDef="let element"
          (click)="element.frd === 'Выходной' ? null : onClick('frd')">
          Пт. </th>
        <td mat-cell *matCellDef="let element" [class.day-selected]="form.timetable.isSelectedDay==='frd'"
          (click)="element.frd === 'Выходной' ? null : onClick('frd')"> {{element.frd}}
        </td>
      </ng-container>

      <ng-container matColumnDef="std">
        <th mat-header-cell *matHeaderCellDef="let element"
          (click)="element.std === 'Выходной' ? null : onClick('std')">
          Сб.
        </th>
        <td mat-cell *matCellDef="let element" [class.day-selected]="form.timetable.isSelectedDay==='std'"
          (click)="element.std === 'Выходной' ? null : onClick('std')"> {{element.std}}
        </td>
      </ng-container>

      <ng-container matColumnDef="snd">
        <th mat-header-cell *matHeaderCellDef="let element"
          (click)="element.snd === 'Выходной' ? null : onClick('snd')">
          Вс. </th>
        <td mat-cell *matCellDef="let element" [class.day-selected]="form.timetable.isSelectedDay==='snd'"
          (click)="element.snd === 'Выходной' ? null : onClick('snd')"> {{element.snd}}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="buttonContainer">
    <button class="submitButton" mat-raised-button color="primary" type="button" (click)="onSubmit()"
      [ngClass]="{'successButton' : form.buttonToggle}">
      <div *ngIf="!form.buttonToggle">Подтвердить
        запись</div>
      <div *ngIf="form.buttonToggle">Вы записались!</div>
    </button>
  </div>

</div>